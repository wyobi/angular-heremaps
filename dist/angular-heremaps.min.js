!function(){return function e(r,t,n){function o(a,s){if(!t[a]){if(!r[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=t[a]={exports:{}};r[a][0].call(p.exports,function(e){return o(r[a][1][e]||e)},p,p.exports,e,r,t,n)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}}()({1:[function(e,r,t){function n(e,r,t,n,o,i,a,s,u,c,p,l){return d.$inject=["$scope","$element","$attrs"],{restrict:"EA",template:"<div ng-style=\"{'width': mapWidth, 'height': mapHeight}\"></div>",replace:!0,scope:{opts:"&options",places:"&",onMapReady:"&mapReady",events:"&"},controller:d};function d(t,n,d){c.CONTROLS.NAMES;var f=t.places(),m=t.opts(),g=t.events(),h=angular.extend({},c.DEFAULT_MAP_OPTIONS,m),v=a.isValidCoords(h.coords)?h.coords:c.DEFAULT_MAP_OPTIONS.coords,E={id:a.generateId()},M=t.onMapReady(),S=null;function y(){var e,r;!function(){if(!o.app_id||!o.app_code&&!o.apiKey)throw new Error("app_id or either of app_code and apiKey were missed. Please specify their in HereMapsConfig");E.platform=new H.service.Platform(o),E.layers=E.platform.createDefaultLayers()}(),e=function(){i.loadModules(d.$attr,{controls:w,events:k})},r=E.map=new H.Map(n[0],E.layers.vector.normal.map,{zoom:a.isValidCoords(v)?h.zoom:h.maxZoom,center:new H.geo.Point(v.latitude,v.longitude)}),s.addMarkersToMap(r,f,!0),o.mapTileConfig&&function(e,r){var t=E.platform.getRasterTileService({format:r.format||"png",queryParams:{lang:"en",ppi:r.ppi||400,style:r.style||"explore.day",congestion:r.congestion||"true",features:r.features||"pois:all,environmental_zones:all,congestion_zones:all,vehicle_restrictions:active_and_inactive"}}),n=new H.service.rasterTile.Provider(t,{tileSize:512}),o=new H.map.layer.TileLayer(n);e.setBaseLayer(o)}(r,o.mapTileConfig),M&&M({refresh:function(){var e=this.getViewBounds();this.setMapSizes(),this.setViewBounds(e)},setMapSizes:function(e,r){O.apply(null,arguments)},getPlatform:function(){return E},calculateRoute:function(e,r){return u.calculateRoute(E,{driveType:e,direction:r})},addRouteToMap:function(e,r){u.addRouteToMap(E.map,e,r)},setZoom:function(e,r){a.zoom(E.map,e||10,r)},getZoom:function(){return E.map.getZoom()},getCenter:function(){return E.map.getCenter()},getViewBounds:function(){return E.map.getViewBounds()},setViewBounds:function(e,r){s.setViewBounds(E.map,e,r)},getBoundsRectFromPoints:function(e,r){return a.getBoundsRectFromPoints.apply(null,arguments)},setCenter:function(e,r){if(!e)return console.error("coords are not specified!");E.map.setCenter(e,r)},cleanRoutes:function(){u.cleanRoutes(E.map)},getUserLocation:function(e,r){return function(e,r){var t=!!e,n=r||0;return i.getPosition({enableHighAccuracy:t,maximumAge:n})}.apply(null,arguments).then(function(e){var r=e.coords;return{lat:r.latitude,lng:r.longitude}})},geocodePosition:function(e,r){return i.geocodePosition(E.platform,{coords:e,radius:r&&r.radius,lang:r&&r.lang})},geocodeAddress:function(e){return i.geocodeAddress(E.platform,{searchtext:e&&e.searchtext,country:e&&e.country,city:e&&e.city,street:e&&e.street,housenumber:e&&e.housenumber})},geocodeAutocomplete:function(e,r){return i.geocodeAutocomplete({query:e,beginHighlight:r&&r.beginHighlight,endHighlight:r&&r.endHighlight,maxresults:r&&r.maxresults})},findLocationById:function(e){return i.findLocationById(e)},updateMarkers:function(e,r){s.updateMarkers(E.map,e,r)},getMapFactory:function(){return a.getMapFactory()}}),e&&e()}function w(){l.start({platform:E,alignment:d.controls})}function k(){p.start({platform:E,listeners:g,options:h,injector:b})}function b(){return function(e){return E[e]}}function O(e,r){T.apply(null,arguments),E.map.getViewPort().resize()}function T(e,r){e=e||n[0].parentNode.offsetHeight||h.height,r=r||n[0].parentNode.offsetWidth||h.width;t.mapHeight=e+"px",t.mapWidth=r+"px",a.runScopeDigestIfNeed(t)}e(function(){return T()}).then(function(){i.loadApi().then(y)}),h.resize&&(S=a.throttle(O,c.UPDATE_MAP_RESIZE_TIMEOUT),r.addEventListener("resize",S)),t.$on("$destroy",function(){r.removeEventListener("resize",S)})}}r.exports=n,n.$inject=["$timeout","$window","$rootScope","$filter","HereMapsConfig","HereMapsAPIService","HereMapsUtilsService","HereMapsMarkerService","HereMapsRoutesService","HereMapsCONSTS","HereMapsEventsFactory","HereMapsUiFactory"]},{}],2:[function(e,r,t){e("./providers/markers"),e("./providers/map-modules"),e("./providers/routes"),r.exports=angular.module("heremaps",["heremaps-markers-module","heremaps-routes-module","heremaps-map-modules"]).provider("HereMapsConfig",e("./providers/mapconfig.provider")).service("HereMapsUtilsService",e("./providers/maputils.service")).service("HereMapsAPIService",e("./providers/api.service")).constant("HereMapsCONSTS",e("./providers/consts")).directive("heremaps",e("./heremaps.directive"))},{"./heremaps.directive":1,"./providers/api.service":3,"./providers/consts":4,"./providers/map-modules":7,"./providers/mapconfig.provider":9,"./providers/maputils.service":10,"./providers/markers":13,"./providers/routes":17}],3:[function(e,r,t){function n(e,r,t,n,o){var i=t.apiVersion,a=t.useHTTPS?"https":"http",s={V:parseInt(i),SUB:i},u={BASE:"://js.api.here.com/v",CORE:"mapsjs-core.js",CORELEGACY:"mapsjs-core-legacy.js",SERVICE:"mapsjs-service.js",SERVICELEGACY:"mapsjs-service-legacy.js",UI:{src:"mapsjs-ui.js",href:"mapsjs-ui.css"},EVENTS:"mapsjs-mapevents.js",AUTOCOMPLETE_URL:"://autocomplete.geocoder.cit.api.here.com/6.2/suggest.json",LOCATION_URL:"://geocoder.cit.api.here.com/6.2/geocode.json"},c={};c[u.CORE]=[],c[u.CORELEGACY]=[],c[u.SERVICE]=[],c[u.SERVICELEGACY]=[],c[u.UI.src]=[],c[u.PANO]=[],c[u.EVENTS]=[];var p=document.getElementsByTagName("head")[0];return{loadApi:function(){return g(u.CORE).then(function(){return g(u.CORELEGACY)}).then(function(){return g(u.SERVICE)}).then(function(){return g(u.SERVICELEGACY)})},loadModules:function(e,r){for(var t in r)if(r.hasOwnProperty(t)&&e[t]){var n=l(t);n().then(r[t])}},getPosition:function(r){var t=e.defer();r&&n.isValidCoords(r.coords)?t.resolve({coords:r.coords}):navigator.geolocation.getCurrentPosition(function(e){t.resolve(e)},function(e){t.reject(e)},r);return t.promise},geocodePosition:function(r,t){if(!t.coords)return console.error("Missed required coords");var n=r.getGeocodingService(),o=e.defer(),i={prox:[t.coords.lat,t.coords.lng,t.radius||250].join(","),mode:"retrieveAddresses",maxresults:"1",gen:"8",language:t.lang||"en-gb"};return n.reverseGeocode(i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},geocodeAddress:function(r,t){if(!t)return console.error("Missed required parameters");var n=r.getGeocodingService(),o=e.defer(),i={gen:8};for(var a in t)i[a]=t[a];return n.geocode(i,function(e){o.resolve(e)},function(e){o.reject(e)}),o.promise},geocodeAutocomplete:function(n){if(!n)return console.error("Missing required parameters");var o=a+u.AUTOCOMPLETE_URL,i=e.defer(),s={query:"",beginHighlight:"<mark>",endHighlight:"</mark>",maxresults:"5"};for(var c in s)angular.isDefined(n[c])&&(s[c]=n[c]);return s.app_id=t.app_id,s.app_code=t.app_code,s.apiKey=t.apiKey,r.get(o,{params:s}).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise},findLocationById:function(n){if(!n)return console.error("Missing Location Identifier");var o=a+u.LOCATION_URL,i=e.defer(),s={locationid:n,gen:9,app_id:t.app_id,app_code:t.app_code,apiKey:t.apiKey};return r.get(o,{params:s}).success(function(e){i.resolve(e)}).error(function(e){i.reject(e)}),i.promise}};function l(e){var r;switch(e){case o.MODULES.UI:r=d;break;case o.MODULES.EVENTS:r=f;break;default:throw new Error("Unknown module",e)}return r}function d(){if(!h(u.UI.src)){var e=n.createLinkTag({rel:"stylesheet",type:"text/css",href:m(u.UI.href)});e&&p.appendChild(e)}return g(u.UI.src)}function f(){return g(u.EVENTS)}function m(e){return[a,u.BASE,s.V,"/",s.SUB,"/",e].join("")}function g(r){var t,o,i=e.defer();return h(r)?i.resolve():(t=m(r),(o=n.createScriptTag({src:t}))&&p.appendChild(o),c[r].push(i),o.onload=function(e){for(var r=c[e],t=0,n=r.length;t<n;++t){var o=r[t];o.resolve()}c[e]=[]}.bind(null,r),o.onerror=function(e){for(var r=c[e],t=0,n=r.length;t<n;++t){var o=r[t];o.reject()}c[e]=[]}.bind(null,r)),i.promise}function h(e){var r=null;switch(e){case u.CORE:r=v;break;case u.SERVICE:r=E;break;case u.UI.src:r=M;break;case u.EVENTS:r=S;break;default:r=function(){return!1}}return r()}function v(){return!!window.H}function E(){return!(!window.H||!window.H.service)}function M(){return!(!window.H||!window.H.ui)}function S(){return!(!window.H||!window.H.mapevents)}}r.exports=n,n.$inject=["$q","$http","HereMapsConfig","HereMapsUtilsService","HereMapsCONSTS"]},{}],4:[function(e,r,t){r.exports={UPDATE_MAP_RESIZE_TIMEOUT:500,ANIMATION_ZOOM_STEP:.05,MODULES:{UI:"controls",EVENTS:"events",PANO:"pano"},DEFAULT_MAP_OPTIONS:{height:480,width:640,zoom:12,maxZoom:2,resize:!1,draggable:!1,coords:{longitude:0,latitude:0}},MARKER_TYPES:{DOM:"DOM",SVG:"SVG"},CONTROLS:{NAMES:{SCALE:"scalebar",SETTINGS:"mapsettings",ZOOM:"zoom",USER:"userposition"},POSITIONS:["top-right","top-center","top-left","left-top","left-middle","left-bottom","right-top","right-middle","right-bottom","bottom-right","bottom-center","bottom-left"]},INFOBUBBLE:{STATE:{OPEN:"open",CLOSED:"closed"},DISPLAY_EVENT:{pointermove:"onHover",tap:"onClick"}},USER_EVENTS:{tap:"click",pointermove:"mousemove",pointerleave:"mouseleave",pointerenter:"mouseenter",drag:"drag",dragstart:"dragstart",dragend:"dragend",mapviewchange:"mapviewchange",mapviewchangestart:"mapviewchangestart",mapviewchangeend:"mapviewchangeend"}}},{}],5:[function(e,r,t){function n(e,r,t,n){function o(e,r,t){this.map=e.map,this.listeners=t,this.inject=new r,this.events=e.events=new H.mapevents.MapEvents(this.map),this.behavior=e.behavior=new H.mapevents.Behavior(this.events),this.bubble=n.create(),this.setupEventListeners()}var i=o.prototype;return i.setupEventListeners=function(){var n=this;e.addEventListener(this.map,"tap",this.infoBubbleHandler.bind(this)),e.addEventListener(this.map,"pointermove",this.infoBubbleHandler.bind(this)),e.addEventListener(this.map,"dragstart",function(e){r.isMarkerInstance(e.target)&&n.behavior.disable(),n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"drag",function(e){var o=e.currentPointer,i=e.target;r.isMarkerInstance(i)&&i.setGeometry(n.map.screenToGeo(o.viewportX,o.viewportY)),n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"dragend",function(e){r.isMarkerInstance(e.target)&&n.behavior.enable(),n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"mapviewchangestart",function(e){n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"mapviewchange",function(e){n.triggerUserListener(t.USER_EVENTS[e.type],e)}),e.addEventListener(this.map,"mapviewchangeend",function(e){n.triggerUserListener(t.USER_EVENTS[e.type],e)})},i.setupOptions=function(e){if(!e)return;this.map.draggable=!!e.draggable},i.triggerUserListener=function(e,r){if(!this.listeners)return;var t=this.listeners[e];t&&t(r)},i.infoBubbleHandler=function(e){var r=this.inject("ui");r&&this.bubble.toggle(e,r);this.triggerUserListener(t.USER_EVENTS[e.type],e)},{start:function(e){if(!(e.platform.map instanceof H.Map))return console.error("Missed required map instance");var r=new o(e.platform,e.injector,e.listeners);e.options&&r.setupOptions(e.options)}}}r.exports=n,n.$inject=["HereMapsUtilsService","HereMapsMarkerService","HereMapsCONSTS","HereMapsInfoBubbleFactory"]},{}],6:[function(e,r,t){function n(e,r,t){function n(){}var o=n.prototype;return o.create=function(e){var n=new H.ui.InfoBubble(e.position,{content:e.markup});return n.display=e.display,n.addClass(t.INFOBUBBLE.STATE.OPEN),r.addEventListener(n,"statechange",function(e){var r=this.getState(),n=this.getElement();r===t.INFOBUBBLE.STATE.CLOSED?n.classList.remove(t.INFOBUBBLE.STATE.OPEN):this.addClass(r)}),n},o.update=function(e,r){e.display=r.display,e.setGeometry(r.position),e.setContent(r.markup),e.setState(t.INFOBUBBLE.STATE.OPEN)},o.toggle=function(r,t){e.isMarkerInstance(r.target)?this.show(r,t):this.close(r,t)},o.show=function(e,r,n){var o=e.target,n=o.getData();if(!n||!n.display||!n.markup||n.display!==t.INFOBUBBLE.DISPLAY_EVENT[e.type])return;var i={position:o.getGeometry(),markup:n.markup,display:n.display};if(!r.bubble)return r.bubble=this.create(i),void r.addBubble(r.bubble);this.update(r.bubble,i)},o.close=function(e,r){if(!r.bubble||r.bubble.display!==t.INFOBUBBLE.DISPLAY_EVENT[e.type])return;r.bubble.setState(t.INFOBUBBLE.STATE.CLOSED)},{create:function(){return new n}}}r.exports=n,n.$inject=["HereMapsMarkerService","HereMapsUtilsService","HereMapsCONSTS"]},{}],7:[function(e,r,t){angular.module("heremaps-events-module",[]).factory("HereMapsEventsFactory",e("./events/events.js")).factory("HereMapsInfoBubbleFactory",e("./events/infobubble.js")),angular.module("heremaps-ui-module",[]).factory("HereMapsUiFactory",e("./ui/ui.js")),r.exports=angular.module("heremaps-map-modules",["heremaps-events-module","heremaps-ui-module"])},{"./events/events.js":5,"./events/infobubble.js":6,"./ui/ui.js":8}],8:[function(e,r,t){function n(e,r,t,n){function o(e,r){this.map=e.map,this.layers=e.layers,this.alignment=r,this.ui=e.ui=H.ui.UI.createDefault(this.map,this.layers),this.setupControls()}o.isValidAlignment=function(e){return!!(n.CONTROLS.POSITIONS.indexOf(e)+1)};var i=o.prototype;return i.setupControls=function(){var e=n.CONTROLS.NAMES,r=this.createUserControl();this.ui.addControl(e.USER,r),this.setControlsAlignment(e)},i.createUserControl=function(){var n=this,o=new H.ui.Control,i=new H.ui.base.Button({label:'<svg class="H_icon" fill="#fff" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path class="middle_location_stroke" d="M8 12c-2.206 0-4-1.795-4-4 0-2.206 1.794-4 4-4s4 1.794 4 4c0 2.205-1.794 4-4 4M8 1.25a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5"></path><path class="inner_location_stroke" d="M8 5a3 3 0 1 1 .001 6A3 3 0 0 1 8 5m0-1C5.794 4 4 5.794 4 8c0 2.205 1.794 4 4 4s4-1.795 4-4c0-2.206-1.794-4-4-4"></path><path class="outer_location_stroke" d="M8 1.25a6.75 6.75 0 1 1 0 13.5 6.75 6.75 0 0 1 0-13.5M8 0C3.59 0 0 3.59 0 8c0 4.411 3.59 8 8 8s8-3.589 8-8c0-4.41-3.59-8-8-8"></path></svg>',onStateChange:function(o){i.getState()!==H.ui.base.Button.State.DOWN&&e.getPosition().then(function(e){var o={lng:e.coords.longitude,lat:e.coords.latitude};n.map.setCenter(o),t.zoom(n.map,17,.08),n.userMarker?n.userMarker.setGeometry(o):n.userMarker=r.addUserMarker(n.map,{pos:o})})}});return o.addChild(i),o},i.setControlsAlignment=function(e){if(!o.isValidAlignment(this.alignment))return;for(var r in e){var t=this.ui.getControl(e[r]);e.hasOwnProperty(r)&&t&&t.setAlignment(this.alignment)}},{start:function(e){if(!(e.platform.map instanceof H.Map||e.platform.layers))return console.error("Missed ui module dependencies");new o(e.platform,e.alignment)}}}r.exports=n,n.$inject=["HereMapsAPIService","HereMapsMarkerService","HereMapsUtilsService","HereMapsCONSTS"]},{}],9:[function(e,r,t){r.exports=function(){var e={};this.$get=function(){return{app_id:e.app_id,app_code:e.app_code,apiKey:e.apiKey,apiVersion:e.apiVersion||"3.1",useHTTPS:e.useHTTPS,useCIT:!!e.useCIT,mapTileConfig:e.mapTileConfig}},this.setOptions=function(r){e=r}}},{}],10:[function(e,r,t){function n(e,r,t){return{throttle:function(e,t){var n=null;return function(){r&&r.cancel(n),n=r(e,t)}},createScriptTag:function(e){var r=document.getElementById(e.src);return!r&&((r=document.createElement("script")).type="text/javascript",r.id=e.src,n(r,e),r)},createLinkTag:function(e){var r=document.getElementById(e.href);return!r&&((r=document.createElement("link")).id=e.href,n(r,e),r)},runScopeDigestIfNeed:function(e,r){if(e.$root&&"$apply"!==e.$root.$$phase&&"$digest"!==e.$root.$$phase)return e.$digest(r||angular.noop),!0;return!1},isValidCoords:function(e){return e&&("string"==typeof e.latitude||"number"==typeof e.latitude)&&("string"==typeof e.longitude||"number"==typeof e.longitude)},addEventListener:function(e,r,t,n){e.addEventListener(r,t,!!n)},zoom:function(e,r,n){var o=e.getZoom(),i=(n||t.ANIMATION_ZOOM_STEP,n*(o>=r?-1:1));return function t(){n&&Math.floor(o)!==Math.floor(r)?(o+=i,e.setZoom(o),requestAnimationFrame(t)):e.setZoom(r)}()},getBoundsRectFromPoints:function(e,r){return H.geo.Rect.fromPoints(e,r,!0)},generateId:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==r?t:3&t|8).toString(16)})},getMapFactory:function(){return H}};function n(e,r){if(!e||!r)throw new Error("Missed attributes");for(var t in r)r.hasOwnProperty(t)&&(e[t]=r[t])}}r.exports=n,n.$inject=["$rootScope","$timeout","HereMapsCONSTS"]},{}],11:[function(e,r,t){function n(e){function r(e){this.place=e,this.setCoords()}var t=r.prototype=new e;return t.constructor=r,t.create=function(){var e=new H.map.Marker(this.coords);return this.addInfoBubble(e),e},r}r.exports=n,n.$inject=["HereMapsMarkerInterface"]},{}],12:[function(e,r,t){function n(e){function r(e){this.place=e,this.setCoords()}var t=r.prototype=new e;return t.constructor=r,t.create=function(){var e=new H.map.DomMarker(this.coords,{icon:this.getIcon()});return this.addInfoBubble(e),e},t.getIcon=function(){var e=this.place.markup;if(!e)throw new Error("markup missed");return new H.map.DomIcon(e)},t.setupEvents=function(e,r,t){var n=t?"removeEventListener":"addEventListener";for(var o in r)r.hasOwnProperty(o)&&e[n].call(null,o,r[o])},r}r.exports=n,n.$inject=["HereMapsMarkerInterface"]},{}],13:[function(e,r,t){r.exports=angular.module("heremaps-markers-module",[]).factory("HereMapsMarkerInterface",e("./marker.js")).factory("HereMapsDefaultMarker",e("./default.marker.js")).factory("HereMapsDOMMarker",e("./dom.marker.js")).factory("HereMapsSVGMarker",e("./svg.marker.js")).service("HereMapsMarkerService",e("./markers.service.js"))},{"./default.marker.js":11,"./dom.marker.js":12,"./marker.js":14,"./markers.service.js":15,"./svg.marker.js":16}],14:[function(e,r,t){r.exports=function(){var e=function(){throw new Error("Abstract class! The Instance should be created")}.prototype;function r(){}return e.create=function(){throw new Error("create:: not implemented")},e.setCoords=function(){this.coords={lat:this.place.pos.lat,lng:this.place.pos.lng}},e.addInfoBubble=function(e){if(!this.place.popup)return;e.setData(this.place.popup)},r.prototype=e,r}},{}],15:[function(e,r,t){function n(e,r,t,n){var o=n.MARKER_TYPES;return{addMarkersToMap:i,addUserMarker:function(e,r){return e.userMarker?e.userMarker:(r.markup='<svg width="35px" height="35px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><circle id="path-1" cx="302" cy="802" r="15"></circle><mask id="mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="-30" y="-30" width="90" height="90"><rect x="257" y="757" width="90" height="90" fill="white"></rect><use xlink:href="#path-1" fill="black"></use></mask></defs><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Service-Options---directions---map" transform="translate(-257.000000, -757.000000)"><g id="Oval-15"><use fill="#FFFFFF" fill-rule="evenodd" xlink:href="#path-1"></use><use stroke-opacity="0.29613904" stroke="#3F34A0" mask="url(#mask-2)" stroke-width="60" xlink:href="#path-1"></use><use stroke="#3F34A0" stroke-width="5" xlink:href="#path-1"></use></g></g></g></svg>',e.userMarker=new t(r).create(),e.addObject(e.userMarker),e.userMarker)},updateMarkers:function(e,r,t){e.markersGroup&&(e.markersGroup.removeAll(),e.removeObject(e.markersGroup),e.markersGroup=null);i.apply(null,arguments)},isMarkerInstance:function(e){return e instanceof H.map.Marker||e instanceof H.map.DomMarker},setViewBounds:a};function i(n,i,s){if(i&&i.length){if(!(n instanceof H.Map))throw new Error("Unsupported map instance");n.markersGroup||(n.markersGroup=new H.map.Group),i.forEach(function(i,a){var s=function(n){var i;switch(n.type?n.type.toUpperCase():null){case o.DOM:i=r;break;case o.SVG:i=t;break;default:i=e}return new i(n)}(i),u=i.draggable?function(e){return e.draggable=!0,e}(s.create()):s.create();n.markersGroup.addObject(u)}),n.addObject(n.markersGroup),s&&a(n,n.markersGroup.getBoundingBox())}}function a(e,r,t){e.getViewModel().setLookAtData(r,!!t)}}r.exports=n,n.$inject=["HereMapsDefaultMarker","HereMapsDOMMarker","HereMapsSVGMarker","HereMapsCONSTS"]},{}],16:[function(e,r,t){function n(e){function r(e){this.place=e,this.setCoords()}var t=r.prototype=new e;return t.constructor=r,t.create=function(){var e=new H.map.Marker(this.coords,{icon:this.getIcon()});return this.addInfoBubble(e),e},t.getIcon=function(){var e=this.place.markup;if(!e)throw new Error("markup missed");return new H.map.Icon(e)},r}r.exports=n,n.$inject=["HereMapsMarkerInterface"]},{}],17:[function(e,r,t){r.exports=angular.module("heremaps-routes-module",[]).service("HereMapsRoutesService",e("./routes.service.js"))},{"./routes.service.js":18}],18:[function(e,r,t){function n(e,r){return{calculateRoute:function(r,t){var n=r.platform,o=(r.map,n.getRoutingService()),i=t.direction,a=i.waypoints,s={mode:"{{MODE}};{{VECHILE}}".replace(/{{MODE}}/,i.mode||"fastest").replace(/{{VECHILE}}/,t.driveType),representation:i.representation||"display",language:i.language||"en-gb"};a.forEach(function(e,r){s["waypoint"+r]=[e.lat,e.lng].join(",")}),function(e,r){for(var t in r)r.hasOwnProperty(t)&&(e[t+"attributes"]=r[t])}(s,i.attrs);var u=e.defer();return o.calculateRoute(s,function(e){u.resolve(e)},function(e){u.reject(e)}),u.promise},addRouteToMap:function(e,n,o){o&&t(e);var i=n.route;if(!e||!i||!i.shape)return;var a=new H.geo.LineString,s=null;i.shape.forEach(function(e){var r=e.split(",");a.pushLatLngAlt(r[0],r[1])});var u=n.style||{};s=new H.map.Polyline(a,{style:{lineWidth:u.lineWidth||4,strokeColor:u.color||"rgba(0, 128, 255, 0.7)"}});var c=e.routesGroup;c||(c=e.routesGroup=new H.map.Group,e.addObject(c));c.addObject(s),n.zoomToBounds&&r.setViewBounds(e,s.getBoundingBox(),!0)},cleanRoutes:t};function t(e){var r=e.routesGroup;r&&(r.removeAll(),e.removeObject(r),e.routesGroup=null)}}r.exports=n,n.$inject=["$q","HereMapsMarkerService"]},{}]},{},[2]);